<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="canonical" href="https://reserve.kdkconslt-sngyouijm.com/">
  <title>無料相談 事前ヒアリング | 東京KIDUKIコンサルティング産業医事務所</title>
  <meta name="description" content="東京KIDUKIコンサルティング産業医事務所の無料相談事前ヒアリング。約2〜3分で完了します。">
  <!-- Google Analytics 4 with Cross-Domain Tracking -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-B1LWPS8MNZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-B1LWPS8MNZ', {
      'linker': {
        'domains': ['kdkconslt-sngyouijm.com', 'consult.kdkconslt-sngyouijm.com', 'reserve.kdkconslt-sngyouijm.com'],
        'accept_incoming': true
      },
      'cookie_flags': 'SameSite=None;Secure'
    });
    // Custom event functions
    function trackEvent(eventName, params) {
      gtag('event', eventName, params);
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Sora:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--color-primary:#0f2d3d;--color-primary-light:#1a4a5e;--color-accent:#00d4aa;--color-accent-glow:rgba(0,212,170,0.3);--color-secondary:#6366f1;--color-bg:#fafbfc;--color-text:#1a1a2e;--color-text-light:#64748b;--color-white:#fff;--color-border:#e2e8f0;--color-danger:#ef4444;--font-display:'Sora','Noto Sans JP',sans-serif;--font-sans:'Noto Sans JP',sans-serif;--shadow-elevated:0 25px 50px -12px rgba(0,0,0,0.15);--transition:0.4s cubic-bezier(0.4,0,0.2,1);--transition-fast:0.2s cubic-bezier(0.4,0,0.2,1);--radius:16px;--radius-sm:8px;--radius-lg:24px}
    *{margin:0;padding:0;box-sizing:border-box}html{scroll-behavior:smooth}
    body{font-family:var(--font-sans);color:var(--color-text);background:linear-gradient(135deg,#0a1628 0%,#1a3a4a 50%,#0f2d3d 100%);min-height:100vh;line-height:1.8;font-size:16px;overflow-x:hidden}
    .bg-effects{position:fixed;inset:0;pointer-events:none;z-index:0}
    .gradient-orb{position:absolute;border-radius:50%;filter:blur(80px);opacity:0.5}
    .gradient-orb-1{width:600px;height:600px;background:radial-gradient(circle,var(--color-accent-glow) 0%,transparent 70%);top:-200px;right:-100px;animation:float 20s ease-in-out infinite}
    .gradient-orb-2{width:400px;height:400px;background:radial-gradient(circle,rgba(99,102,241,0.2) 0%,transparent 70%);bottom:-100px;left:-100px;animation:float 15s ease-in-out infinite reverse}
    @keyframes float{0%,100%{transform:translate(0,0) scale(1)}33%{transform:translate(30px,-30px) scale(1.05)}66%{transform:translate(-20px,20px) scale(0.95)}}
    .grid-pattern{position:absolute;inset:0;background-image:linear-gradient(rgba(0,212,170,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(0,212,170,0.03) 1px,transparent 1px);background-size:60px 60px;opacity:0.5}
    .container{position:relative;z-index:1;max-width:720px;margin:0 auto;padding:40px 24px 80px}
    .page-header{text-align:center;margin-bottom:48px;animation:fadeInUp 0.8s ease-out}
    .logo{font-family:var(--font-display);font-size:1.8rem;font-weight:700;color:var(--color-white);text-decoration:none;letter-spacing:-0.03em;display:inline-block;margin-bottom:24px}
    .logo span{background:linear-gradient(135deg,var(--color-accent) 0%,var(--color-secondary) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
    .page-title{font-family:var(--font-display);font-size:clamp(1.5rem,4vw,2rem);font-weight:700;color:var(--color-white);margin-bottom:12px}
    .page-subtitle{color:var(--color-text-light);font-size:1rem}
    .progress-container{margin-bottom:40px;animation:fadeInUp 0.8s ease-out 0.1s both}
    .progress-info{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
    .progress-label{color:var(--color-accent);font-size:0.875rem;font-weight:500;display:flex;align-items:center;gap:8px}
    .progress-label svg{width:16px;height:16px}
    .progress-count{color:var(--color-text-light);font-size:0.875rem}
    .progress-bar{height:6px;background:rgba(255,255,255,0.1);border-radius:100px;overflow:hidden}
    .progress-fill{height:100%;background:linear-gradient(90deg,var(--color-accent),var(--color-secondary));border-radius:100px;transition:width 0.5s cubic-bezier(0.4,0,0.2,1)}
    .time-estimate{background:rgba(0,212,170,0.1);border:1px solid rgba(0,212,170,0.2);border-radius:var(--radius-sm);padding:12px 16px;display:inline-flex;align-items:center;gap:8px;color:var(--color-accent);font-size:0.875rem;font-weight:500;margin-bottom:32px;animation:fadeInUp 0.8s ease-out 0.2s both}
    .time-estimate svg{width:18px;height:18px}
    .form-card{background:var(--color-white);border-radius:var(--radius-lg);box-shadow:var(--shadow-elevated);overflow:hidden;animation:fadeInUp 0.8s ease-out 0.3s both}
    .step{display:none;padding:40px}
    .step.active{display:block;animation:slideIn 0.4s ease-out}
    @keyframes slideIn{from{opacity:0;transform:translateX(20px)}to{opacity:1;transform:translateX(0)}}
    @keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
    .error-message{display:none;background:linear-gradient(135deg,#fef2f2 0%,#fee2e2 100%);border:1px solid #fecaca;border-radius:var(--radius-sm);padding:12px 16px;margin-bottom:20px;color:#dc2626;font-size:0.9rem;align-items:center;gap:10px}
    .error-message.show{display:flex;animation:shake 0.4s ease-out}
    @keyframes shake{0%,100%{transform:translateX(0)}20%,60%{transform:translateX(-5px)}40%,80%{transform:translateX(5px)}}
    .error-message svg{width:18px;height:18px;flex-shrink:0}
    .question-header{margin-bottom:28px}
    .question-category{display:inline-flex;align-items:center;gap:6px;background:linear-gradient(135deg,var(--color-primary) 0%,var(--color-primary-light) 100%);color:var(--color-white);padding:6px 14px;border-radius:100px;font-size:0.75rem;font-weight:600;letter-spacing:0.02em;margin-bottom:16px;text-transform:uppercase}
    .question-number{background:rgba(255,255,255,0.2);padding:2px 8px;border-radius:100px;font-size:0.7rem}
    .question-title{font-family:var(--font-display);font-size:1.4rem;font-weight:700;color:var(--color-text);line-height:1.4;margin-bottom:8px}
    .question-description{color:var(--color-text-light);font-size:0.9rem;line-height:1.7}
    .required-badge{color:var(--color-danger);font-size:0.75rem;font-weight:500;margin-left:8px}
    .options{display:flex;flex-direction:column;gap:12px}
    .option{position:relative;cursor:pointer}
    .option input{position:absolute;opacity:0;width:0;height:0}
    .option-label{display:flex;align-items:center;gap:16px;padding:18px 20px;background:var(--color-bg);border:2px solid var(--color-border);border-radius:var(--radius);transition:var(--transition-fast)}
    .option:hover .option-label{border-color:var(--color-accent);transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,212,170,0.1)}
    .option input:checked+.option-label{border-color:var(--color-accent);background:linear-gradient(135deg,rgba(0,212,170,0.08) 0%,rgba(99,102,241,0.05) 100%);box-shadow:0 0 0 4px rgba(0,212,170,0.1)}
    .option input:checked+.option-label .option-check{background:var(--color-accent);border-color:var(--color-accent)}
    .option input:checked+.option-label .option-check svg{opacity:1;transform:scale(1)}
    .option-check{width:24px;height:24px;border:2px solid var(--color-border);border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:var(--transition-fast);background:var(--color-white)}
    .option-check svg{width:14px;height:14px;color:var(--color-white);opacity:0;transform:scale(0.5);transition:var(--transition-fast)}
    .option.checkbox .option-check{border-radius:6px}
    .option-text{flex:1}
    .option-main{font-weight:500;color:var(--color-text);display:block}
    .option-sub{font-size:0.85rem;color:var(--color-text-light);margin-top:4px}
    .multi-select .options{display:flex;flex-wrap:wrap;gap:10px}
    .multi-select .option-label{padding:12px 18px;gap:10px}
    .multi-select .option-check{width:20px;height:20px;border-radius:5px}
    .multi-select .option-check svg{width:12px;height:12px}
    .select-hint{display:flex;align-items:center;gap:8px;padding:12px 16px;background:rgba(99,102,241,0.08);border-radius:var(--radius-sm);margin-bottom:16px;color:var(--color-secondary);font-size:0.85rem}
    .select-hint svg{width:16px;height:16px;flex-shrink:0}
    .text-input-group{margin-top:16px}
    .text-input-label{display:block;font-size:0.85rem;color:var(--color-text-light);margin-bottom:8px}
    .text-input{width:100%;padding:14px 18px;border:2px solid var(--color-border);border-radius:var(--radius-sm);font-family:inherit;font-size:1rem;color:var(--color-text);transition:var(--transition-fast);background:var(--color-bg)}
    .text-input:focus{outline:none;border-color:var(--color-accent);box-shadow:0 0 0 4px rgba(0,212,170,0.1)}
    .text-input::placeholder{color:#94a3b8}
    .form-grid{display:grid;gap:20px}
    .form-group{display:flex;flex-direction:column;gap:8px}
    .form-label{font-weight:500;color:var(--color-text);font-size:0.95rem}
    .form-label .optional{color:var(--color-text-light);font-weight:400;font-size:0.85rem;margin-left:8px}
    .consent-box{background:linear-gradient(135deg,#fef3c7 0%,#fef9c3 100%);border:1px solid #fbbf24;border-radius:var(--radius);padding:24px;margin-bottom:24px}
    .consent-icon{width:48px;height:48px;background:#fbbf24;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:16px}
    .consent-icon svg{width:24px;height:24px;color:#78350f}
    .consent-title{font-weight:700;color:#78350f;margin-bottom:8px}
    .consent-text{color:#92400e;font-size:0.9rem;line-height:1.7}
    .diagnosis-preview{background:linear-gradient(135deg,rgba(0,212,170,0.08) 0%,rgba(99,102,241,0.05) 100%);border:1px solid rgba(0,212,170,0.2);border-radius:var(--radius);padding:24px;margin-top:32px}
    .diagnosis-header{display:flex;align-items:center;gap:12px;margin-bottom:16px}
    .diagnosis-icon{width:40px;height:40px;background:linear-gradient(135deg,var(--color-accent) 0%,var(--color-secondary) 100%);border-radius:10px;display:flex;align-items:center;justify-content:center}
    .diagnosis-icon svg{width:20px;height:20px;color:var(--color-white)}
    .diagnosis-title{font-weight:600;color:var(--color-text)}
    .diagnosis-list{display:flex;flex-direction:column;gap:8px}
    .diagnosis-item{display:flex;align-items:center;gap:10px;color:var(--color-text-light);font-size:0.9rem}
    .diagnosis-item svg{width:16px;height:16px;color:var(--color-accent);flex-shrink:0}
    .nav-buttons{display:flex;gap:12px;margin-top:32px;padding-top:24px;border-top:1px solid var(--color-border)}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:16px 28px;border-radius:100px;font-family:inherit;font-size:1rem;font-weight:600;cursor:pointer;transition:var(--transition);border:none;text-decoration:none}
    .btn svg{width:20px;height:20px;transition:var(--transition-fast)}
    .btn-back{background:transparent;border:2px solid var(--color-border);color:var(--color-text-light)}
    .btn-back:hover{border-color:var(--color-text-light);color:var(--color-text)}
    .btn-next{flex:1;background:linear-gradient(135deg,var(--color-primary) 0%,var(--color-primary-light) 100%);color:var(--color-white);box-shadow:0 4px 16px rgba(15,45,61,0.3)}
    .btn-next:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(15,45,61,0.4)}
    .btn-next:hover svg{transform:translateX(4px)}
    .btn-next:disabled{opacity:0.5;cursor:not-allowed;transform:none}
    .btn-submit{flex:1;background:linear-gradient(135deg,var(--color-accent) 0%,#00b894 100%);color:var(--color-white);box-shadow:0 4px 16px rgba(0,212,170,0.3)}
    .btn-submit:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,212,170,0.4)}
    .btn-submit:disabled{opacity:0.6;cursor:not-allowed;transform:none}
    .complete-content{text-align:center;padding:60px 40px}
    .complete-icon{width:80px;height:80px;background:linear-gradient(135deg,var(--color-accent) 0%,var(--color-secondary) 100%);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 24px;animation:scaleIn 0.5s cubic-bezier(0.34,1.56,0.64,1)}
    @keyframes scaleIn{from{transform:scale(0);opacity:0}to{transform:scale(1);opacity:1}}
    .complete-icon svg{width:40px;height:40px;color:var(--color-white)}
    .complete-title{font-family:var(--font-display);font-size:1.8rem;font-weight:700;color:var(--color-text);margin-bottom:12px}
    .complete-text{color:var(--color-text-light);margin-bottom:32px;line-height:1.8}
    .complete-buttons{display:flex;flex-direction:column;gap:12px;align-items:center}
    .cal-button{display:inline-flex;align-items:center;gap:12px;background:linear-gradient(135deg,var(--color-accent) 0%,#00b894 100%);color:var(--color-white);padding:18px 36px;border-radius:100px;font-weight:600;font-size:1.1rem;text-decoration:none;box-shadow:0 4px 20px rgba(0,212,170,0.4);transition:var(--transition)}
    .cal-button:hover{transform:translateY(-3px);box-shadow:0 8px 32px rgba(0,212,170,0.5)}
    .cal-button svg{width:24px;height:24px}
    .later-link{color:var(--color-text-light);font-size:0.9rem;text-decoration:none;display:inline-flex;align-items:center;gap:6px;margin-top:8px;cursor:pointer}
    .later-link:hover{color:var(--color-accent)}
    .summary-box{background:var(--color-bg);border:1px solid var(--color-border);border-radius:var(--radius);padding:24px;margin-top:32px;text-align:left}
    .summary-title{font-weight:600;color:var(--color-text);margin-bottom:16px;display:flex;align-items:center;gap:8px}
    .summary-title svg{width:18px;height:18px;color:var(--color-accent)}
    .summary-grid{display:grid;gap:12px}
    .summary-item{display:flex;justify-content:space-between;align-items:flex-start;padding-bottom:12px;border-bottom:1px solid var(--color-border)}
    .summary-item:last-child{border-bottom:none;padding-bottom:0}
    .summary-label{font-size:0.85rem;color:var(--color-text-light)}
    .summary-value{font-weight:500;color:var(--color-text);text-align:right;max-width:60%}
    .skip-link{display:inline-flex;align-items:center;gap:6px;color:var(--color-text-light);font-size:0.85rem;text-decoration:none;margin-top:16px;cursor:pointer;transition:var(--transition-fast)}
    .skip-link:hover{color:var(--color-accent)}
    .skip-link svg{width:14px;height:14px}
    .optional-badge{color:var(--color-text-light);font-size:0.75rem;font-weight:500;margin-left:8px;background:var(--color-bg);padding:4px 10px;border-radius:100px}
    .contact-info-box{background:linear-gradient(135deg,rgba(99,102,241,0.08) 0%,rgba(0,212,170,0.05) 100%);border:1px solid rgba(99,102,241,0.2);border-radius:var(--radius);padding:20px;margin-bottom:24px}
    .contact-info-title{font-weight:600;color:var(--color-text);margin-bottom:8px;display:flex;align-items:center;gap:8px}
    .contact-info-title svg{width:18px;height:18px;color:var(--color-secondary)}
    .contact-info-text{font-size:0.9rem;color:var(--color-text-light)}
    .conditional-note{display:flex;align-items:center;gap:8px;padding:10px 14px;background:rgba(99,102,241,0.1);border-radius:var(--radius-sm);color:var(--color-secondary);font-size:0.85rem;margin-top:20px}
    .conditional-note svg{width:16px;height:16px;flex-shrink:0}
    .hidden{display:none!important}
    .footer-note{text-align:center;margin-top:32px;color:rgba(255,255,255,0.5);font-size:0.85rem;animation:fadeInUp 0.8s ease-out 0.4s both}
    .footer-note a{color:var(--color-accent);text-decoration:none}
    .footer-note a:hover{text-decoration:underline}
    .btn.loading{pointer-events:none;position:relative}
    .btn.loading span{opacity:0}
    .btn.loading::after{content:'';position:absolute;width:20px;height:20px;border:2px solid transparent;border-top-color:currentColor;border-radius:50%;animation:spin 0.8s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    .toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(100px);background:var(--color-primary);color:var(--color-white);padding:16px 24px;border-radius:var(--radius);box-shadow:var(--shadow-elevated);display:flex;align-items:center;gap:12px;z-index:1000;opacity:0;transition:all 0.4s cubic-bezier(0.4,0,0.2,1)}
    .toast.show{transform:translateX(-50%) translateY(0);opacity:1}
    .toast svg{width:20px;height:20px;color:var(--color-accent)}
    @media(max-width:640px){.container{padding:24px 16px 60px}.step{padding:28px 20px}.question-title{font-size:1.2rem}.option-label{padding:14px 16px}.multi-select .options{flex-direction:column}.nav-buttons{flex-direction:column-reverse}.btn{width:100%}.complete-content{padding:40px 24px}.summary-item{flex-direction:column;gap:4px}.summary-value{text-align:left;max-width:100%}}
  </style>
</head>
<body>
  <div class="bg-effects"><div class="grid-pattern"></div><div class="gradient-orb gradient-orb-1"></div><div class="gradient-orb gradient-orb-2"></div></div>
  <div class="container">
    <div class="page-header">
      <a href="https://kdkconslt-sngyouijm.com/" class="logo"><span>東京KIDUKIコンサルティング産業医事務所</span></a>
      <h1 class="page-title">無料相談 事前ヒアリング</h1>
      <p class="page-subtitle">最適なプランをご提案するための簡単な質問です</p>
    </div>
    <div class="progress-container">
      <div class="progress-info">
        <span class="progress-label"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>進捗</span>
        <span class="progress-count"><span id="currentStep">1</span> / <span id="totalSteps">14</span></span>
      </div>
      <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width:7%"></div></div>
    </div>
    <div class="time-estimate">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
      所要時間：約2〜3分
    </div>
    <div class="form-card">
      <form id="questionnaireForm">
        <div class="step active" data-step="0">
          <div class="error-message" id="error-0"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg><span>両方のチェックボックスにチェックを入れてください</span></div>
          <div class="question-header"><div class="question-category"><span class="question-number">Q0</span>ご確認事項</div><h2 class="question-title">本フォームについてのご同意<span class="required-badge">* 必須</span></h2></div>
          <div class="consent-box"><div class="consent-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div><h3 class="consent-title">重要事項</h3><p class="consent-text">本フォームは医療の診断・治療ではなく、<strong>産業医業務の運用設計/システム導入相談</strong>です。医療行為に関するご相談は医療機関へお問い合わせください。</p></div>
          <div class="options"><label class="option checkbox"><input type="checkbox" name="consent_notice" value="agree"><span class="option-label"><span class="option-check"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg></span><span class="option-text"><span class="option-main">上記の重要事項を理解しました</span></span></span></label></div>
          <div class="options" style="margin-top:16px"><label class="option checkbox"><input type="checkbox" name="consent_terms" value="agree"><span class="option-label"><span class="option-check"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg></span><span class="option-text"><span class="option-main"><a href="https://kdkconslt-sngyouijm.com/privacy" target="_blank" rel="noopener" style="color:var(--color-accent);text-decoration:underline">プライバシーポリシー</a>および<a href="https://kdkconslt-sngyouijm.com/terms" target="_blank" rel="noopener" style="color:var(--color-accent);text-decoration:underline">利用規約</a>に同意します</span></span></span></label></div>
          <div class="nav-buttons"><button type="button" class="btn btn-next" onclick="nextStep()"><span>次へ進む</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></button></div>
        </div>
        <div class="step" data-step="1"><div class="error-message" id="error-1"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg><span>この質問は必須です</span></div><div class="question-header"><div class="question-category"><span class="question-number">Q1</span>会社の基本情報</div><h2 class="question-title">従業員数を教えてください<span class="required-badge">* 必須</span></h2></div><div class="options" id="q1options"></div><div class="nav-buttons"><button type="button" class="btn btn-back" onclick="prevStep()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/></svg><span>戻る</span></button><button type="button" class="btn btn-next" onclick="nextStep()"><span>次へ進む</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></button></div></div>
        <div class="step" data-step="2"><div class="error-message" id="error-2"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg><span>この質問は必須です</span></div><div class="question-header"><div class="question-category"><span class="question-number">Q2</span>会社の基本情報</div><h2 class="question-title">拠点数を教えてください<span class="required-badge">* 必須</span></h2></div><div class="options" id="q2options"></div><div class="nav-buttons"><button type="button" class="btn btn-back" onclick="prevStep()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/></svg><span>戻る</span></button><button type="button" class="btn btn-next" onclick="nextStep()"><span>次へ進む</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></button></div></div>
        <div class="step" data-step="3"><div class="error-message" id="error-3"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg><span>この質問は必須です</span></div><div class="question-header"><div class="question-category"><span class="question-number">Q3</span>会社の基本情報</div><h2 class="question-title">産業医体制の現状を教えてください<span class="required-badge">* 必須</span></h2></div><div class="options" id="q3options"></div><div class="nav-buttons"><button type="button" class="btn btn-back" onclick="prevStep()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/></svg><span>戻る</span></button><button type="button" class="btn btn-next" onclick="nextStep()"><span>次へ進む</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></button></div></div>
        <div class="step" data-step="4"><div class="error-message" id="error-4"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg><span>この質問は必須です</span></div><div class="question-header"><div class="question-category"><span class="question-number">Q4</span>会社の基本情報</div><h2 class="question-title">訪問対応は必要ですか？<span class="required-badge">* 必須</span></h2><p class="question-description">衛生委員会・職場巡視などの訪問対応の必要性をお選びください。</p></div><div class="options" id="q4options"></div><div class="nav-buttons"><button type="button" class="btn btn-back" onclick="prevStep()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/></svg><span>戻る</span></button><button type="button" class="btn btn-next" onclick="nextStep()"><span>次へ進む</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></button></div></div>
        <div class="step" data-step="5"><div class="error-message" id="error-5"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg><span>この質問は必須です</span></div><div class="question-header"><div class="question-category"><span class="question-number">Q5</span>Case（案件）について</div><h2 class="question-title">月あたりの産業医案件は何件くらいですか？<span class="required-badge">* 必須</span></h2></div><div class="options" id="q5options"></div><div class="nav-buttons"><button type="button" class="btn btn-back" onclick="prevStep()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/></svg><span>戻る</span></button><button type="button" class="btn btn-next" onclick="nextStep()"><span>次へ進む</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></button></div></div>
        <div class="step" data-step="6"><div class="error-message" id="error-6"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg><span>少なくとも1つ選択してください</span></div><div class="question-header"><div class="question-category"><span class="question-number">Q6</span>Case（案件）について</div><h2 class="question-title">多い案件タイプを選んでください<span class="required-badge">* 必須</span></h2></div><div class="select-hint"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>複数選択可（最大3つまで）</div><div class="options multi-select" id="q6options"></div><div class="text-input-group"><label class="text-input-label">その他（自由記載）</label><input type="text" name="caseTypesOther" class="text-input" placeholder="上記以外の案件があればご記入ください"></div><div class="nav-buttons"><button type="button" class="btn btn-back" onclick="prevStep()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/></svg><span>戻る</span></button><button type="button" class="btn btn-next" onclick="nextStep()"><span>次へ進む</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></button></div></div>
        <div class="step" data-step="7"><div class="error-message" id="error-7"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg><span>少なくとも1つ選択してください</span></div><div class="question-header"><div class="question-category"><span class="question-number">Q7</span>現在の課題</div><h2 class="question-title">いちばん困っていることは？<span class="required-badge">* 必須</span></h2></div><div class="select-hint"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>最大2つまで選択してください</div><div class="options" id="q7options"></div><div class="text-input-group"><label class="text-input-label">その他（自由記載）</label><input type="text" name="painPointsOther" class="text-input" placeholder="上記以外にお困りのことがあればご記入ください"></div><div class="nav-buttons"><button type="button" class="btn btn-back" onclick="prevStep()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/></svg><span>戻る</span></button><button type="button" class="btn btn-next" onclick="nextStep()"><span>次へ進む</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></button></div></div>
        <div class="step" data-step="8"><div class="error-message" id="error-8"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg><span>この質問は必須です</span></div><div class="question-header"><div class="question-category"><span class="question-number">Q8</span>現在の課題</div><h2 class="question-title">"期限"のプレッシャーが強い案件がありますか？<span class="required-badge">* 必須</span></h2></div><div class="options" id="q8options"></div><div class="nav-buttons"><button type="button" class="btn btn-back" onclick="prevStep()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/></svg><span>戻る</span></button><button type="button" class="btn btn-next" onclick="nextStep()"><span>次へ進む</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></button></div></div>
        <div class="step" data-step="9"><div class="error-message" id="error-9"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg><span>この質問は必須です</span></div><div class="question-header"><div class="question-category"><span class="question-number">Q9</span>スケジューリング</div><h2 class="question-title">面談等の日程調整は、いま誰がやっていますか？<span class="required-badge">* 必須</span></h2></div><div class="options" id="q9options"></div><div class="hidden" id="schedulingSystemGroup"><div class="conditional-note"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>予約システムについて教えてください（任意）</div><div class="options" id="q9subOptions"></div></div><div class="nav-buttons"><button type="button" class="btn btn-back" onclick="prevStep()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/></svg><span>戻る</span></button><button type="button" class="btn btn-next" onclick="nextStep()"><span>次へ進む</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></button></div></div>
        <div class="step" data-step="10"><div class="error-message" id="error-10"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg><span>少なくとも1つ選択してください</span></div><div class="question-header"><div class="question-category"><span class="question-number">Q10</span>ルーティング</div><h2 class="question-title">必要な対応を教えてください<span class="required-badge">* 必須</span></h2></div><div class="select-hint"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>該当するものをすべて選択してください</div><div class="options" id="q10options"></div><div class="nav-buttons"><button type="button" class="btn btn-back" onclick="prevStep()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/></svg><span>戻る</span></button><button type="button" class="btn btn-next" onclick="nextStep()"><span>次へ進む</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></button></div></div>
        <div class="step" data-step="11"><div class="error-message" id="error-11"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg><span>この質問は必須です</span></div><div class="question-header"><div class="question-category"><span class="question-number">Q11</span>産業医案件について</div><h2 class="question-title">産業医案件のうち面談が伴う割合は？<span class="required-badge">* 必須</span></h2><p class="question-description">産業医が絡む業務のうち、面談が必要なケースの比率を教えてください。</p></div><div class="options" id="q11options"></div><div class="nav-buttons"><button type="button" class="btn btn-back" onclick="prevStep()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/></svg><span>戻る</span></button><button type="button" class="btn btn-next" onclick="nextStep()"><span>次へ進む</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></button></div></div>
        <div class="step" data-step="12"><div class="error-message" id="error-12"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg><span>この質問は必須です</span></div><div class="question-header"><div class="question-category"><span class="question-number">Q12</span>導入体制</div><h2 class="question-title">導入の決裁者・関係者を教えてください<span class="required-badge">* 必須</span></h2><p class="question-description">導入検討に関わる方を選択してください。</p></div><div class="options" id="q12options"></div><div class="nav-buttons"><button type="button" class="btn btn-back" onclick="prevStep()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/></svg><span>戻る</span></button><button type="button" class="btn btn-next" onclick="nextStep()"><span>次へ進む</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></button></div></div>
        <div class="step" data-step="13"><div class="error-message" id="error-13"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg><span>必須項目を入力してください</span></div><div class="question-header"><div class="question-category"><span class="question-number">Q13</span>ご連絡先</div><h2 class="question-title">ご連絡先を教えてください<span class="required-badge">* 必須</span></h2></div><div class="contact-info-box"><h4 class="contact-info-title"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>なぜお聞きするのか</h4><p class="contact-info-text">ご入力いただいた内容をもとに、相談時に最適なプランをご提案します。</p></div><div class="form-grid"><div class="form-group"><label class="form-label">会社名<span class="required-badge">* 必須</span></label><input type="text" name="companyName" class="text-input" placeholder="株式会社〇〇" required></div><div class="form-group"><label class="form-label">会社住所<span class="required-badge">* 必須</span></label><input type="text" name="companyAddress" class="text-input" placeholder="東京都〇〇区〇〇1-2-3" required></div><div class="form-group"><label class="form-label">ご担当者名<span class="required-badge">* 必須</span></label><input type="text" name="contactName" class="text-input" placeholder="山田 太郎" required></div><div class="form-group"><label class="form-label">メールアドレス<span class="required-badge">* 必須</span></label><input type="email" name="email" class="text-input" placeholder="example@company.co.jp" required></div><div class="form-group"><label class="form-label">電話番号<span class="required-badge">* 必須</span></label><input type="tel" name="hr_phone" class="text-input" placeholder="03-1234-5678" required></div><div class="form-group"><label class="form-label">役職<span class="optional">（任意）</span></label><input type="text" name="position" class="text-input" placeholder="人事部 課長"></div></div><div class="nav-buttons"><button type="button" class="btn btn-back" onclick="prevStep()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/></svg><span>戻る</span></button><button type="button" class="btn btn-submit" onclick="submitForm()" id="submitBtn"><span>回答を送信して予約へ</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></button></div><a class="skip-link" onclick="showOptionalQuestions()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/></svg>追加で詳細を入力する（精度が上がります）</a></div>
        <div class="step hidden" data-step="14" data-optional="true"><div class="question-header"><div class="question-category"><span class="question-number">Q14</span>追加情報</div><h2 class="question-title">使っているグループウェア<span class="optional-badge">任意</span></h2></div><div class="options" id="q14options"></div><div class="nav-buttons"><button type="button" class="btn btn-back" onclick="prevStep()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/></svg><span>戻る</span></button><button type="button" class="btn btn-next" onclick="nextStep()"><span>次へ進む</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></button></div></div>
        <div class="step hidden" data-step="15" data-optional="true"><div class="question-header"><div class="question-category"><span class="question-number">Q15</span>追加情報</div><h2 class="question-title">セキュリティ要件<span class="optional-badge">任意</span></h2></div><div class="options" id="q15options"></div><div class="nav-buttons"><button type="button" class="btn btn-back" onclick="prevStep()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/></svg><span>戻る</span></button><button type="button" class="btn btn-next" onclick="nextStep()"><span>次へ進む</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></button></div></div>
        <div class="step hidden" data-step="16" data-optional="true"><div class="error-message" id="error-16"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg><span>この質問は必須です</span></div><div class="question-header"><div class="question-category"><span class="question-number">Q16</span>追加情報</div><h2 class="question-title">いつから整備したいですか？<span class="required-badge">* 必須</span></h2></div><div class="options" id="q16options"></div><div class="nav-buttons"><button type="button" class="btn btn-back" onclick="prevStep()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/></svg><span>戻る</span></button><button type="button" class="btn btn-submit" onclick="submitForm()"><span>回答を送信して予約へ</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></button></div></div>
        <div class="step" data-step="complete"><div class="complete-content"><div class="complete-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg></div><h2 class="complete-title">ヒアリング完了！</h2><p class="complete-text">回答ありがとうございます。<br>続けて、15分無料相談の予約へお進みください。</p><div class="complete-buttons"><a href="#" class="cal-button" id="calBookingButton"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>予約ページへ進む</a><a class="later-link" id="laterLink">予約は後で（資料だけ受け取る）</a></div><div class="summary-box"><h3 class="summary-title"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>回答サマリー</h3><div class="summary-grid" id="summaryGrid"></div></div></div></div>
      </form>
    </div>
    <div class="footer-note"><a href="https://consult.kdkconslt-sngyouijm.com/">← 東京KIDUKIコンサルティング産業医事務所トップに戻る</a></div>
  </div>
  <div class="toast" id="toast"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg><span id="toastMessage">回答を送信しました</span></div>
  <script>
    const CONFIG={
      API_ENDPOINT:'https://func-oh-medself-b9c0fxe5e6g0evdy.japanwest-01.azurewebsites.net/api/leads',
      CAL_URL:'https://cal.com/team/kiduki/intro-15-online?overlayCalendar=true',
      ENABLE_API:true,
      CONSENT_VERSION:'1.0',
      PRIVACY_URL:'https://kdkconslt-sngyouijm.com/privacy',
      TERMS_URL:'https://kdkconslt-sngyouijm.com/terms'
    };
    // UUIDv4 generator
    function generateUUID(){return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){const r=Math.random()*16|0,v=c==='x'?r:(r&0x3|0x8);return v.toString(16);});}
    // UTM/Tracking parameter extraction
    function getTrackingParams(){const params=new URLSearchParams(window.location.search);return{utm_source:params.get('utm_source')||undefined,utm_medium:params.get('utm_medium')||undefined,utm_campaign:params.get('utm_campaign')||undefined,utm_term:params.get('utm_term')||undefined,utm_content:params.get('utm_content')||undefined,referrer:document.referrer||undefined,landing_url:window.location.href};}
    const trackingParams=getTrackingParams();
    let consentCheckedAt=null;
    const QUESTIONS={q1:{name:'employeeCount',type:'radio',options:[{v:'1-49',l:'〜49名',s:'小規模特則あり'},{v:'50-99',l:'50〜99名'},{v:'100-299',l:'100〜299名'},{v:'300-999',l:'300〜999名'},{v:'1000+',l:'1000名〜'}]},q2:{name:'locationCount',type:'radio',options:[{v:'1',l:'1拠点'},{v:'2-3',l:'2〜3拠点'},{v:'4-10',l:'4〜10拠点'},{v:'11+',l:'11拠点以上'}]},q3:{name:'doctorStatus',type:'radio',options:[{v:'internal',l:'社内産業医がいる'},{v:'external',l:'外部産業医と契約中'},{v:'none',l:'まだいない（これから選任予定）'},{v:'both',l:'複数併用（社内＋外部）'}]},q4:{name:'visitRequired',type:'radio',options:[{v:'required',l:'必須',s:'毎月/隔月/四半期/不定期'},{v:'online',l:'オンラインで十分'},{v:'unknown',l:'まだわからない'}]},q5:{name:'monthlyCases',type:'radio',options:[{v:'0-2',l:'0〜2件/月'},{v:'3-5',l:'3〜5件/月'},{v:'6-10',l:'6〜10件/月'},{v:'11-20',l:'11〜20件/月'},{v:'21-50',l:'21〜50件/月'},{v:'51+',l:'51件以上/月'}]},q6:{name:'caseTypes',type:'checkbox',max:3,options:[{v:'health_leave',l:'体調相談・休職判定'},{v:'return_work',l:'復職判定・復職後フォロー'},{v:'high_stress',l:'高ストレス'},{v:'overtime',l:'長時間労働'},{v:'health_check',l:'健診事後措置'},{v:'dispute',l:'紛争・調査（ハラスメント等）'}]},q7:{name:'painPoints',type:'checkbox',max:2,options:[{v:'scheduling',l:'日程調整が遅い／面談まで時間がかかる'},{v:'scattered',l:'やり取りがメール/口頭で散らばる'},{v:'deadline',l:'期限切れ・対応漏れが起きる'},{v:'evidence',l:'証跡（議事録・根拠・ログ）が揃わない'},{v:'quality',l:'産業医の判断が属人化し品質がブレる'},{v:'consensus',l:'人事/上長/安衛で合意形成が進まない'},{v:'external_doc',l:'外部産業医の意見書が回収できない'}]},q8:{name:'deadlinePressure',type:'radio',options:[{v:'often',l:'ある（よくある）'},{v:'sometimes',l:'たまにある'},{v:'rarely',l:'ほぼない'},{v:'unknown',l:'わからない'}]},q9:{name:'schedulingHandler',type:'radio',options:[{v:'hr_manual',l:'人事が手作業'},{v:'admin_bpo',l:'社内もしくは外部委託先が手作業'},{v:'doctor_manual',l:'産業医（医師側）が手作業'},{v:'has_system',l:'すでに予約システムがある'},{v:'unknown',l:'わからない'}]},q9sub:{name:'schedulingSystem',type:'radio',options:[{v:'google_outlook',l:'Google/Outlook予約'},{v:'calcom',l:'Cal.com'},{v:'teams_meet',l:'Teams/Google Meet連携'},{v:'other',l:'その他'}]},q10:{name:'requiredSupport',type:'checkbox',options:[{v:'japanese_only',l:'日本語のみ'},{v:'english',l:'英語対応が必要',s:'頻度：たまに/毎月/毎週'},{v:'urgent',l:'48時間以内の緊急が発生する',s:'頻度：たまに/毎月/毎週'}]},q11:{name:'interviewRatio',type:'radio',options:[{v:'90plus',l:'ほぼ全件（9割以上）'},{v:'70-90',l:'7〜9割程度'},{v:'50-70',l:'5〜7割程度'},{v:'under50',l:'5割未満',s:'意見書のみで完結するケースが多い'},{v:'unknown',l:'わからない'}]},q12:{name:'decisionMaker',type:'radio',options:[{v:'hr_only',l:'人事部門だけで決められる'},{v:'hr_manager',l:'人事＋上長の承認が必要'},{v:'hr_legal',l:'人事＋法務/コンプラが関与'},{v:'executive',l:'経営層の決裁が必要'},{v:'unknown',l:'まだわからない'}]},q14:{name:'groupware',type:'radio',options:[{v:'microsoft365',l:'Microsoft 365（Outlook/Teams）'},{v:'google_workspace',l:'Google Workspace'},{v:'both',l:'両方/混在'},{v:'other',l:'その他'}]},q15:{name:'security',type:'checkbox',options:[{v:'sso',l:'SSO（SAML）必須'},{v:'data_location',l:'データ保管先制約あり',s:'国内/特定クラウド'},{v:'audit',l:'監査対応が必要'},{v:'none',l:'特になし/不明'}]},q16:{name:'timeline',type:'radio',options:[{v:'this_month',l:'今月'},{v:'1-2months',l:'1〜2ヶ月以内'},{v:'3-6months',l:'3〜6ヶ月以内'},{v:'undecided',l:'未定'}]}};
    const validationRules={0:{type:'custom',validate:()=>{const notice=document.querySelector('input[name="consent_notice"]:checked');const terms=document.querySelector('input[name="consent_terms"]:checked');if(notice&&terms){consentCheckedAt=new Date().toISOString();return true;}return false;}},1:{type:'radio',name:'employeeCount'},2:{type:'radio',name:'locationCount'},3:{type:'radio',name:'doctorStatus'},4:{type:'radio',name:'visitRequired'},5:{type:'radio',name:'monthlyCases'},6:{type:'checkbox',name:'caseTypes',min:1},7:{type:'checkbox',name:'painPoints',min:1},8:{type:'radio',name:'deadlinePressure'},9:{type:'radio',name:'schedulingHandler'},10:{type:'checkbox',name:'requiredSupport',min:1},11:{type:'radio',name:'interviewRatio'},12:{type:'radio',name:'decisionMaker'},13:{type:'custom',validate:()=>{const companyName=document.querySelector('input[name="companyName"]').value.trim();const companyAddress=document.querySelector('input[name="companyAddress"]').value.trim();const contactName=document.querySelector('input[name="contactName"]').value.trim();const email=document.querySelector('input[name="email"]').value.trim();const hrPhone=document.querySelector('input[name="hr_phone"]').value.trim();const emailInput=document.querySelector('input[name="email"]');return companyName&&companyAddress&&contactName&&email&&hrPhone&&emailInput.checkValidity();}},14:{type:'none'},15:{type:'none'},16:{type:'radio',name:'timeline'}};
    let currentStep=0,showOptional=false,leadId=null,companyId=null;const totalRequiredSteps=14,totalOptionalSteps=3;const form=document.getElementById('questionnaireForm'),progressFill=document.getElementById('progressFill'),currentStepEl=document.getElementById('currentStep'),totalStepsEl=document.getElementById('totalSteps');
    function createOption(name,type,opt){const isCheckbox=type==='checkbox';return`<label class="option ${isCheckbox?'checkbox':''}"><input type="${isCheckbox?'checkbox':'radio'}" name="${name}" value="${opt.v}"><span class="option-label"><span class="option-check"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg></span><span class="option-text"><span class="option-main">${opt.l}</span>${opt.s?`<span class="option-sub">${opt.s}</span>`:''}</span></span></label>`;}
    document.addEventListener('DOMContentLoaded',()=>{Object.keys(QUESTIONS).forEach(qid=>{const q=QUESTIONS[qid];const container=document.getElementById(qid+'options');if(container)container.innerHTML=q.options.map(o=>createOption(q.name,q.type,o)).join('');});document.querySelectorAll('input[name="schedulingHandler"]').forEach(input=>{input.addEventListener('change',()=>{document.getElementById('schedulingSystemGroup').classList.toggle('hidden',input.value!=='has_system');});});setupMaxSelection('caseTypes',3);setupMaxSelection('painPoints',2);updateProgress();});
    function setupMaxSelection(name,max){document.querySelectorAll(`input[name="${name}"]`).forEach(input=>{input.addEventListener('change',()=>{if(document.querySelectorAll(`input[name="${name}"]:checked`).length>max)input.checked=false;});});}
    function validateStep(step){const rule=validationRules[step];if(!rule||rule.type==='none')return true;let isValid=false;if(rule.type==='custom'){isValid=rule.validate();}else if(rule.type==='radio'){isValid=!!document.querySelector(`input[name="${rule.name}"]:checked`);}else if(rule.type==='checkbox'){isValid=document.querySelectorAll(`input[name="${rule.name}"]:checked`).length>=(rule.min||1);}else if(rule.type==='text'){const input=document.querySelector(`input[name="${rule.name}"]`);if(input){const value=input.value.trim();if(rule.required&&!value){isValid=false;}else if(rule.format==='email'){isValid=value&&input.checkValidity();}else{isValid=!rule.required||!!value;}}}const errorEl=document.getElementById(`error-${step}`);if(errorEl)errorEl.classList.toggle('show',!isValid);return isValid;}
    function hideError(step){const errorEl=document.getElementById(`error-${step}`);if(errorEl)errorEl.classList.remove('show');}
    function nextStep(){if(!validateStep(currentStep))return;hideError(currentStep);document.querySelector(`.step[data-step="${currentStep}"]`).classList.remove('active');let next=currentStep+1;if(!showOptional&&next>13&&next<17)next='complete';const nextEl=document.querySelector(`.step[data-step="${next}"]`);if(nextEl){nextEl.classList.remove('hidden');nextEl.classList.add('active');currentStep=next;updateProgress();scrollToTop();}}
    function prevStep(){hideError(currentStep);document.querySelector(`.step[data-step="${currentStep}"]`).classList.remove('active');let prev=currentStep-1;if(!showOptional&&currentStep==='complete')prev=13;const prevEl=document.querySelector(`.step[data-step="${prev}"]`);if(prevEl){prevEl.classList.add('active');currentStep=prev;updateProgress();scrollToTop();}}
    function showOptionalQuestions(){showOptional=true;document.querySelectorAll('.step[data-optional="true"]').forEach(s=>s.classList.remove('hidden'));totalStepsEl.textContent=totalRequiredSteps+totalOptionalSteps;document.querySelector(`.step[data-step="${currentStep}"]`).classList.remove('active');currentStep=14;document.querySelector('.step[data-step="14"]').classList.add('active');updateProgress();scrollToTop();}
    function updateProgress(){const total=showOptional?totalRequiredSteps+totalOptionalSteps:totalRequiredSteps;const current=typeof currentStep==='number'?currentStep+1:total;progressFill.style.width=`${(current/total)*100}%`;currentStepEl.textContent=current;totalStepsEl.textContent=total;}
    function scrollToTop(){window.scrollTo({top:0,behavior:'smooth'});}
    async function submitForm(){if(!validateStep(currentStep))return;const submitBtn=document.getElementById('submitBtn');submitBtn.classList.add('loading');submitBtn.disabled=true;leadId=generateUUID();const formData=collectFormData();formData.lead_id=leadId;formData.submitted_at=new Date().toISOString();formData.consent={final_consent:true,consent_checked_at:consentCheckedAt||new Date().toISOString(),consent_version:CONFIG.CONSENT_VERSION,privacy_url:CONFIG.PRIVACY_URL,terms_url:CONFIG.TERMS_URL};formData.tracking=trackingParams;let apiSuccess=false;try{if(CONFIG.ENABLE_API){const response=await fetch(CONFIG.API_ENDPOINT,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});if(response.ok){const result=await response.json();leadId=result.lead_id||leadId;companyId=result.company_id||null;apiSuccess=true;}}}catch(error){console.log('API not available, using localStorage');}localStorage.setItem(`casetra_lead_${leadId}`,JSON.stringify({...formData,company_id:companyId}));showComplete(formData);if(apiSuccess){showToast('回答を送信しました');}else if(CONFIG.ENABLE_API){showToast('端末に保存しました（予約は可能です）');}else{showToast('回答を保存しました');}submitBtn.classList.remove('loading');submitBtn.disabled=false;}
    function showComplete(formData){document.querySelector(`.step[data-step="${currentStep}"]`).classList.remove('active');document.querySelector('.step[data-step="complete"]').classList.add('active');currentStep='complete';
      // GA4: Track form completion event
      trackEvent('consult_form_complete', {
        'event_category': 'lead_generation',
        'event_label': 'questionnaire_submitted',
        'company_id': companyId || 'unknown',
        'lead_id': leadId,
        'employee_count': formData.employeeCount || 'unknown',
        'monthly_cases': formData.monthlyCases || 'unknown'
      });
      const calParams=new URLSearchParams();
      // ID情報
      if(companyId)calParams.set('company_id',companyId);
      calParams.set('lead_id',leadId);
      // 連絡先情報
      if(formData.contactName)calParams.set('name',formData.contactName);
      if(formData.email)calParams.set('email',formData.email);
      if(formData.companyName)calParams.set('company_name',formData.companyName);
      // 全質問事項
      if(formData.employeeCount)calParams.set('employeeCount',formData.employeeCount);
      if(formData.locationCount)calParams.set('locationCount',formData.locationCount);
      if(formData.doctorStatus)calParams.set('doctorStatus',formData.doctorStatus);
      if(formData.visitRequired)calParams.set('visitRequired',formData.visitRequired);
      if(formData.monthlyCases)calParams.set('monthlyCases',formData.monthlyCases);
      if(formData.caseTypes)calParams.set('caseTypes',Array.isArray(formData.caseTypes)?formData.caseTypes.join(','):formData.caseTypes);
      if(formData.painPoints)calParams.set('painPoints',Array.isArray(formData.painPoints)?formData.painPoints.join(','):formData.painPoints);
      if(formData.deadlinePressure)calParams.set('deadlinePressure',formData.deadlinePressure);
      if(formData.schedulingHandler)calParams.set('schedulingHandler',formData.schedulingHandler);
      if(formData.schedulingSystem)calParams.set('schedulingSystem',formData.schedulingSystem);
      if(formData.requiredSupport)calParams.set('requiredSupport',Array.isArray(formData.requiredSupport)?formData.requiredSupport.join(','):formData.requiredSupport);
      if(formData.interviewRatio)calParams.set('interviewRatio',formData.interviewRatio);
      if(formData.decisionMaker)calParams.set('decisionMaker',formData.decisionMaker);
      if(formData.groupware)calParams.set('groupware',formData.groupware);
      if(formData.security)calParams.set('security',Array.isArray(formData.security)?formData.security.join(','):formData.security);
      if(formData.timeline)calParams.set('timeline',formData.timeline);
      if(formData.hr_phone)calParams.set('hr_phone',formData.hr_phone);
      // UTMパラメータ
      if(trackingParams.utm_source)calParams.set('utm_source',trackingParams.utm_source);
      if(trackingParams.utm_medium)calParams.set('utm_medium',trackingParams.utm_medium);
      if(trackingParams.utm_campaign)calParams.set('utm_campaign',trackingParams.utm_campaign);
      if(trackingParams.utm_term)calParams.set('utm_term',trackingParams.utm_term);
      if(trackingParams.utm_content)calParams.set('utm_content',trackingParams.utm_content);
      const calBtn=document.getElementById('calBookingButton');calBtn.href=`${CONFIG.CAL_URL}&${calParams.toString()}`;calBtn.onclick=()=>{trackEvent('consult_booking_click',{'event_category':'lead_generation','event_label':'cal_booking_started','company_id':companyId||'unknown','lead_id':leadId});};const laterLink=document.getElementById('laterLink');laterLink.style.display=formData.email?'inline-flex':'none';laterLink.onclick=()=>{trackEvent('consult_later_click',{'event_category':'lead_generation','event_label':'booking_deferred'});showToast('資料をメールでお送りします');};populateSummary(formData);updateProgress();scrollToTop();}
    function collectFormData(){const formDataObj=new FormData(form);const data={};formDataObj.forEach((v,k)=>{if(data[k])data[k]=Array.isArray(data[k])?[...data[k],v]:[data[k],v];else data[k]=v;});return data;}
    function populateSummary(data){const labels={employeeCount:'従業員数',locationCount:'拠点数',doctorStatus:'産業医体制',visitRequired:'訪問対応',monthlyCases:'月間Case数',interviewRatio:'面談割合',decisionMaker:'決裁者',deadlinePressure:'期限プレッシャー',schedulingHandler:'日程調整担当',companyName:'会社名',contactName:'担当者名',email:'メール',hr_phone:'電話番号',groupware:'グループウェア',timeline:'導入時期'};const valueLabels={'1-49':'〜49名','50-99':'50〜99名','100-299':'100〜299名','300-999':'300〜999名','1000+':'1000名〜','1':'1拠点','2-3':'2〜3拠点','4-10':'4〜10拠点','11+':'11拠点以上','internal':'社内産業医','external':'外部産業医と契約中','none':'これから選任','both':'複数併用','required':'訪問必須','online':'オンラインで十分','unknown':'わからない','often':'よくある','sometimes':'たまにある','rarely':'ほぼない','hr_manual':'人事が手作業','admin_bpo':'社内/外部委託先','doctor_manual':'産業医が手作業','has_system':'予約システムあり','microsoft365':'Microsoft 365','google_workspace':'Google Workspace','this_month':'今月','1-2months':'1〜2ヶ月以内','3-6months':'3〜6ヶ月以内','undecided':'未定','90plus':'9割以上','70-90':'7〜9割','50-70':'5〜7割','under50':'5割未満','hr_only':'人事部門のみ','hr_manager':'人事＋上長','hr_legal':'人事＋法務','executive':'経営層決裁'};let html='';Object.keys(labels).forEach(k=>{if(data[k]){const v=Array.isArray(data[k])?data[k].join(', '):data[k];html+=`<div class="summary-item"><span class="summary-label">${labels[k]}</span><span class="summary-value">${valueLabels[v]||v}</span></div>`;}});document.getElementById('summaryGrid').innerHTML=html;}
    function showToast(message){const toast=document.getElementById('toast');document.getElementById('toastMessage').textContent=message;toast.classList.add('show');setTimeout(()=>toast.classList.remove('show'),3000);}
  </script>
</body>
</html>
